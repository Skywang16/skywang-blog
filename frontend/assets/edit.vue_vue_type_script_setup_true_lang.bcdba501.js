import{_ as h,C as L,D as O,Q as P,R as T,t as j,F as Q}from"./element-plus.8c1ec78f.js";import{_ as W}from"./picker.781c9a4f.js";import{P as X}from"./index.345a4530.js";import{r as p,f as G}from"./index.a935f15b.js";import{u as H}from"./useDictOptions.61f850f1.js";import{r as J}from"./role.13aa6c64.js";import{e as K}from"./post.61633870.js";import{d as Y}from"./department.1c6c1183.js";import{d as Z,s as w,r as $,e as ee,a1 as V,o as i,c as v,X as t,P as s,u as l,a as c,O as m,T as ue,W as le,a8 as oe}from"./@vue.a137a740.js";function ge(r){return p.get({url:"/system/admin/list",params:r})}function ae(r){return p.post({url:"/system/admin/add",params:r})}function te(r){return p.get({url:"/system/admin/detail",params:r})}function re(r){return p.post({url:"/system/admin/edit",params:r})}function Ce(r){return p.post({url:"/system/admin/del",params:r})}function Ee(r){return p.post({url:"/system/admin/disable",params:r})}const se={class:"edit-popup"},de=c("div",{class:"form-tips"},"\u5EFA\u8BAE\u5C3A\u5BF8\uFF1A100*100px\uFF0C\u652F\u6301jpg\uFF0Cjpeg\uFF0Cpng\u683C\u5F0F",-1),ne=c("div",{class:"form-tips"},"\u5141\u8BB8\u591A\u4EBA\u540C\u65F6\u5728\u7EBF\u767B\u5F55",-1),we=Z({__name:"edit",emits:["success","close"],setup(r,{expose:D,emit:_}){const b=w(),f=w(),F=$("add"),y=ee(()=>F.value=="edit"?"\u7F16\u8F91\u7BA1\u7406\u5458":"\u65B0\u589E\u7BA1\u7406\u5458"),g="\u8D85\u7EA7\u7BA1\u7406\u5458",u=V({id:"",username:"",nickname:"",deptId:"",role:"",avatar:"",password:"",passwordConfirm:"",isDisable:0,isMultipoint:1,sort:1}),C=(d,e,a)=>{u.password&&(e||a(new Error("\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801")),e!==u.password&&a(new Error("\u4E24\u6B21\u8F93\u5165\u5BC6\u7801\u4E0D\u4E00\u81F4!"))),a()},B=V({username:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7",trigger:["blur"]}],nickname:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",trigger:["blur"]}],role:[{required:!0,message:"\u8BF7\u9009\u62E9\u89D2\u8272",trigger:["blur"]}],deptId:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",trigger:["blur"]}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"}],passwordConfirm:[{required:!0,message:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801",trigger:"blur"},{validator:C,trigger:"blur"}]}),{optionsData:E}=H({role:{api:J},post:{api:K},dept:{api:Y}}),A=async()=>{var d,e;await((d=b.value)==null?void 0:d.validate()),F.value=="edit"?await re(u):await ae(u),(e=f.value)==null||e.close(),G.msgSuccess("\u64CD\u4F5C\u6210\u529F"),_("success")},k=(d="add")=>{var e;F.value=d,(e=f.value)==null||e.open()},x=async d=>{const e=await te({id:d.id});console.log(e,"zxcvzxczxczxczxczxc");for(const a in u)e[a]!=null&&e[a]!=null&&(a==="role"?u[a]=Number(e[a]):u[a]=e[a],console.log(u,"22222")),Number(u.deptId)==0&&(u.deptId="");B.password=[],B.passwordConfirm=[{validator:C,trigger:"blur"}]},I=()=>{_("close")};return D({open:k,setFormData:x}),(d,e)=>{const a=L,n=O,U=W,R=h,q=P,z=T,S=j,M=Q;return i(),v("div",se,[t(X,{ref_key:"popupRef",ref:f,title:l(y),async:!0,width:"550px",onConfirm:A,onClose:I},{default:s(()=>[t(M,{ref_key:"formRef",ref:b,model:l(u),"label-width":"84px",rules:l(B)},{default:s(()=>[t(n,{label:"\u8D26\u53F7",prop:"username"},{default:s(()=>[t(a,{modelValue:l(u).username,"onUpdate:modelValue":e[0]||(e[0]=o=>l(u).username=o),placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7",clearable:""},null,8,["modelValue"])]),_:1}),t(n,{label:"\u5934\u50CF",prop:"avatar"},{default:s(()=>[c("div",null,[t(U,{modelValue:l(u).avatar,"onUpdate:modelValue":e[1]||(e[1]=o=>l(u).avatar=o),limit:1},null,8,["modelValue"]),de])]),_:1}),t(n,{label:"\u540D\u79F0",prop:"nickname"},{default:s(()=>[t(a,{modelValue:l(u).nickname,"onUpdate:modelValue":e[2]||(e[2]=o=>l(u).nickname=o),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1}),l(u).id!==1?(i(),m(n,{key:0,label:"\u5F52\u5C5E\u90E8\u95E8",prop:"deptId"},{default:s(()=>[t(R,{class:"flex-1",modelValue:l(u).deptId,"onUpdate:modelValue":e[3]||(e[3]=o=>l(u).deptId=o),data:l(E).dept,clearable:"","node-key":"id",props:{value:"id",label:"name",disabled(o){return!!o.isStop}},"check-strictly":"","default-expand-all":!0,placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8"},null,8,["modelValue","data","props"])]),_:1})):ue("",!0),t(n,{label:"\u89D2\u8272",prop:"role"},{default:s(()=>[l(u).id!==1?(i(),m(z,{key:0,modelValue:l(u).role,"onUpdate:modelValue":e[4]||(e[4]=o=>l(u).role=o),class:"flex-1",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272"},{default:s(()=>[(i(!0),v(le,null,oe(l(E).role,(o,N)=>(i(),m(q,{key:N,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(i(),m(a,{key:1,modelValue:g,"onUpdate:modelValue":e[5]||(e[5]=o=>g=o),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272",desabled:""}))]),_:1}),t(n,{label:"\u5BC6\u7801",prop:"password"},{default:s(()=>[t(a,{modelValue:l(u).password,"onUpdate:modelValue":e[6]||(e[6]=o=>l(u).password=o),modelModifiers:{trim:!0},"show-password":"",clzearable:"",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),t(n,{label:"\u786E\u8BA4\u5BC6\u7801",prop:"passwordConfirm"},{default:s(()=>[t(a,{modelValue:l(u).passwordConfirm,"onUpdate:modelValue":e[7]||(e[7]=o=>l(u).passwordConfirm=o),modelModifiers:{trim:!0},"show-password":"",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u786E\u8BA4\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),t(n,{label:"\u591A\u5904\u767B\u5F55"},{default:s(()=>[c("div",null,[t(S,{modelValue:l(u).isMultipoint,"onUpdate:modelValue":e[8]||(e[8]=o=>l(u).isMultipoint=o),"active-value":1,"inactive-value":0},null,8,["modelValue"]),ne])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}});export{we as _,Ee as a,Ce as b,ge as c};
