import{C as z,D as O,Q,R as H,w as J,F as X,J as G,H as M,t as Y,I as Z,K as ee}from"./element-plus.8c1ec78f.js";import{u as te,_ as ae}from"./usePaging.f7aa3aa8.js";import{j as A,f as C,b as le,_ as oe}from"./index.a935f15b.js";import{d as S,a1 as U,b0 as ne,ag as ue,an as ie,o as _,c as se,X as e,P as a,u as l,a9 as w,U as d,a as K,Q as f,O as h,V as P,T as re,k as de}from"./@vue.a137a740.js";import{f as me,h as ce,d as pe,i as _e}from"./article.d4977c0d.js";import"./@vueuse.a2c70c0f.js";import"./@element-plus.3660753f.js";import"./lodash-es.7718a1e4.js";import"./dayjs.7a8df8b4.js";import"./axios.00a285e9.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.fd318bfa.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.1914dddf.js";import"./vue-router.9605b890.js";import"./pinia.706f3ea9.js";import"./css-color-function.1f5b2f4d.js";import"./color.52be626b.js";import"./clone.4f21711a.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./ms.564e106c.js";import"./nprogress.bcfbe0a4.js";import"./vue-clipboard3.76938e62.js";import"./clipboard.d4b72188.js";import"./echarts.098cf7d6.js";import"./zrender.0646a922.js";import"./tslib.60310f1a.js";import"./highlight.js.7165574c.js";import"./@highlightjs.7fc78ec7.js";const fe={class:"article-lists"},ge={class:"flex justify-end mt-4"},be=S({name:"articleLists"}),Ye=S({...be,setup(ve){const n=U({title:"",keyWords:"",cid:"",status:-1,recommended:-1}),y=U([]),{pager:g,getLists:m,resetPage:E,resetParams:N}=te({fetchFun:_e,params:n}),F=async i=>{({...i});try{await me(i),C.msgSuccess("\u4FEE\u6539\u6210\u529F"),m()}catch{m()}},W=async i=>{await C.confirm("\u786E\u5B9A\u8981\u5220\u9664\uFF1F"),await ce({id:i}),C.msgSuccess("\u5220\u9664\u6210\u529F"),m()},$=i=>{const o=i.keyWords.split(",").map(u=>parseInt(u,10));console.log(y);const c=o.map(u=>{const r=y.find(V=>V.id===u);return r?r.name:null}).filter(u=>u!==null);return console.log(c,"asdasd"),c.join(", ")},k=async()=>{try{const o=await pe({pageNo:1,pageSize:100});o.lists&&o.lists.length>0&&y.splice(0,y.length,...o.lists)}catch(i){console.error(i)}};return ne(()=>{m(),k()}),m(),k(),(i,o)=>{const c=z,u=O,r=Q,V=H,b=J,I=X,D=G,L=le,x=ue("router-link"),s=M,T=oe,B=Y,R=Z,j=ae,v=ie("perms"),q=ee;return _(),se("div",fe,[e(D,{class:"!border-none",shadow:"never"},{default:a(()=>[e(I,{ref:"formRef",class:"mb-[-16px]",model:l(n),inline:!0},{default:a(()=>[e(u,{label:"\u6587\u7AE0\u6807\u9898"},{default:a(()=>[e(c,{class:"w-[280px]",modelValue:l(n).title,"onUpdate:modelValue":o[0]||(o[0]=t=>l(n).title=t),clearable:"",onKeyup:w(l(E),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(u,{label:"\u6587\u7AE0\u5173\u952E\u8BCD"},{default:a(()=>[e(c,{class:"w-[280px]",modelValue:l(n).keyWords,"onUpdate:modelValue":o[1]||(o[1]=t=>l(n).keyWords=t),clearable:"",onKeyup:w(l(E),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(u,{label:"\u6587\u7AE0\u4F5C\u8005"},{default:a(()=>[e(c,{class:"w-[280px]",modelValue:l(n).cid,"onUpdate:modelValue":o[2]||(o[2]=t=>l(n).cid=t),clearable:"",onKeyup:w(l(E),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(u,{label:"\u6587\u7AE0\u72B6\u6001"},{default:a(()=>[e(V,{class:"w-[280px]",modelValue:l(n).status,"onUpdate:modelValue":o[3]||(o[3]=t=>l(n).status=t)},{default:a(()=>[e(r,{label:"\u5168\u90E8",value:-1}),e(r,{label:"\u663E\u793A",value:1}),e(r,{label:"\u9690\u85CF",value:0})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"\u662F\u5426\u63A8\u8350"},{default:a(()=>[e(V,{class:"w-[280px]",modelValue:l(n).recommended,"onUpdate:modelValue":o[4]||(o[4]=t=>l(n).recommended=t)},{default:a(()=>[e(r,{label:"\u5168\u90E8",value:-1}),e(r,{label:"\u662F",value:1}),e(r,{label:"\u5426",value:0})]),_:1},8,["modelValue"])]),_:1}),e(u,null,{default:a(()=>[e(b,{type:"primary",onClick:l(E)},{default:a(()=>[d("\u67E5\u8BE2")]),_:1},8,["onClick"]),e(b,{onClick:l(N)},{default:a(()=>[d("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),e(D,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[K("div",null,[f((_(),h(x,{to:{path:l(A)("article:add/edit")}},{default:a(()=>[e(b,{type:"primary",class:"mb-4"},{icon:a(()=>[e(L,{name:"el-icon-Plus"})]),default:a(()=>[d(" \u65B0\u589E\u8D44\u8BAF ")]),_:1})]),_:1},8,["to"])),[[v,["article:add","article:add/edit"]]])]),f((_(),h(R,{size:"large",data:l(g).lists},{default:a(()=>[e(s,{label:"\u5E8F\u53F7",width:"60"},{default:a(t=>[d(P(t.$index+1),1)]),_:1}),e(s,{label:"ID",prop:"id","min-width":"80"}),e(s,{label:"\u5C01\u9762","min-width":"100"},{default:a(({row:t})=>[t.image?(_(),h(T,{key:0,src:t.image,width:60,height:45,"preview-src-list":[t.image],"preview-teleported":"",fit:"contain"},null,8,["src","preview-src-list"])):re("",!0)]),_:1}),e(s,{label:"\u6807\u9898",prop:"title","min-width":"160","show-tooltip-when-overflow":""}),e(s,{label:"\u6587\u7AE0\u5173\u952E\u8BCD",prop:"keyWords","min-width":"100"},{default:a(({row:t})=>[d(P($(t)),1)]),_:1}),e(s,{label:"\u4F5C\u8005",prop:"cid","min-width":"60"}),e(s,{label:"\u72B6\u6001","min-width":"100"},{default:a(({row:t})=>[f(e(B,{modelValue:t.status,"onUpdate:modelValue":p=>t.status=p,"active-value":1,"inactive-value":0,onChange:p=>F(t)},null,8,["modelValue","onUpdate:modelValue","onChange"]),[[v,["article:cate:change"]]])]),_:1}),e(s,{label:"\u63A8\u8350","min-width":"100"},{default:a(({row:t})=>[f(e(B,{modelValue:t.recommended,"onUpdate:modelValue":p=>t.recommended=p,"active-value":1,"inactive-value":0,onChange:p=>F(t)},null,8,["modelValue","onUpdate:modelValue","onChange"]),[[v,["article:cate:change"]]])]),_:1}),e(s,{label:"\u53D1\u5E03\u65F6\u95F4",prop:"publishTime","min-width":"120"}),e(s,{label:"\u64CD\u4F5C",width:"120",fixed:"right"},{default:a(({row:t})=>[f((_(),h(b,{type:"primary",link:""},{default:a(()=>[e(x,{to:{path:l(A)("article:add/edit"),query:{id:t.id}}},{default:a(()=>[d(" \u7F16\u8F91 ")]),_:2},1032,["to"])]),_:2},1024)),[[v,["article:edit","article:add/edit"]]]),f((_(),h(b,{type:"danger",link:"",onClick:p=>W(t.id)},{default:a(()=>[d(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[v,["article:del"]]])]),_:1})]),_:1},8,["data"])),[[q,l(g).loading]]),K("div",ge,[e(j,{modelValue:l(g),"onUpdate:modelValue":o[5]||(o[5]=t=>de(g)?g.value=t:null),onChange:l(m)},null,8,["modelValue","onChange"])])]),_:1})])}}});export{Ye as default};
