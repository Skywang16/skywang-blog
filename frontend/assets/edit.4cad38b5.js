import{_ as M}from"./index.3a12671c.js";import{M as O,N as P,O as S,P as Y,J as z,C as L,D as $,Q as j,R as G,v as H,F as J,w as Q}from"./element-plus.8c1ec78f.js";import{_ as X}from"./index.vue_vue_type_style_index_0_lang.f2268e50.js";import{_ as K}from"./picker.781c9a4f.js";import{u as Z,a as ee}from"./vue-router.9605b890.js";import{e as ue,f as te}from"./index.a935f15b.js";import{d as oe,e as le,f as ae,g as re}from"./article.d4977c0d.js";import{h as se}from"./moment.40bc58bf.js";import{d as V,a1 as f,s as ie,o as E,c as B,X as t,P as a,u as l,a as r,W as me,a8 as de,O as ne,U as d}from"./@vue.a137a740.js";import"./@vueuse.a2c70c0f.js";import"./@element-plus.3660753f.js";import"./lodash-es.7718a1e4.js";import"./dayjs.7a8df8b4.js";import"./axios.00a285e9.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.fd318bfa.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@wangeditor.e356e69e.js";import"./index.345a4530.js";import"./index.33d8b440.js";import"./usePaging.f7aa3aa8.js";import"./index.ad18f60b.js";import"./index.vue_vue_type_script_setup_true_lang.7bfa50f8.js";import"./vue3-video-play.b1eef99b.js";import"./vuedraggable.6b9b01a3.js";import"./vue.b1bda70a.js";import"./sortablejs.57b1acee.js";import"./lodash.1914dddf.js";import"./pinia.706f3ea9.js";import"./css-color-function.1f5b2f4d.js";import"./color.52be626b.js";import"./clone.4f21711a.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./ms.564e106c.js";import"./nprogress.bcfbe0a4.js";import"./vue-clipboard3.76938e62.js";import"./clipboard.d4b72188.js";import"./echarts.098cf7d6.js";import"./zrender.0646a922.js";import"./tslib.60310f1a.js";import"./highlight.js.7165574c.js";import"./@highlightjs.7fc78ec7.js";const pe={class:"article-edit"},ce={class:"xl:flex"},_e={class:"w-80"},fe={class:"w-80"},Ee=r("div",{class:"form-tips"},"\u5EFA\u8BAE\u5C3A\u5BF8\uFF1A240*180px",-1),Fe={class:"w-80"},ge=r("div",{class:"form-tips"},"\u9ED8\u8BA4\u4E3A0\uFF0C \u6570\u503C\u8D8A\u5927\u8D8A\u6392\u524D",-1),be={class:"w-80"},Be={class:"xl:ml-20"},Ve=V({name:"articleListsEdit"}),fu=V({...Ve,setup(Ae){const n=Z(),A=ee(),u=f({id:n.query.id,title:"",image:"",cid:"",desc:"",keyWords:"",content:"",sort:0,publishTime:"",status:0,recommended:0}),{removeTab:v}=ue(),F=ie(),w=f({title:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6807\u9898",trigger:"blur"}],image:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u7AE0\u5C01\u9762",trigger:"blur"}],cid:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u7AE0\u4F5C\u8005",trigger:"blur"}],keyWords:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u7AE0\u5173\u952E\u8BCD",trigger:"blur"}],desc:[{required:!0,message:"\u8BF7\u8F93\u5165\u7B80\u4ECB",trigger:"blur"}],content:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u7AE0\u5185\u5BB9",trigger:"blur"}],sort:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6392\u5E8F",trigger:"blur"}],publishTime:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u7AE0\u53D1\u5E03\u65F6\u95F4",trigger:"blur"}]}),_=f([]),h=async()=>{try{const e=await oe({pageNo:1,pageSize:100});e.lists&&e.lists.length>0&&_.splice(0,_.length,...e.lists)}catch(i){console.error(i)}},C=async()=>{const i=await le({id:n.query.id});Object.keys(u).forEach(e=>{if(u[e]=i[e],e==="keyWords"){const p=u[e].split(",").map(m=>parseInt(m,10));u[e]=p,console.log(u[e])}})},D=async()=>{var i;await((i=F.value)==null?void 0:i.validate()),u.publishTime=se(u.publishTime).format("YYYY-MM-DD"),u.keyWords=u.keyWords.join(","),n.query.id?await ae(u):await re(u),te.msgSuccess("\u64CD\u4F5C\u6210\u529F"),v(),A.back()};return n.query.id&&C(),h(),(i,e)=>{const g=O,p=z,m=L,s=$,y=K,k=j,x=G,q=H,R=P,c=S,b=Y,U=X,T=J,W=Q,N=M;return E(),B("div",pe,[t(p,{class:"!border-none",shadow:"never"},{default:a(()=>[t(g,{content:"\u6587\u7AE0\u7F16\u8F91",onBack:e[0]||(e[0]=o=>i.$router.back())})]),_:1}),t(p,{class:"mt-4 !border-none",shadow:"never"},{default:a(()=>[t(T,{ref_key:"formRef",ref:F,class:"ls-form",model:l(u),"label-width":"100px",rules:l(w)},{default:a(()=>[r("div",ce,[r("div",null,[t(s,{label:"\u6587\u7AE0\u6807\u9898",prop:"title"},{default:a(()=>[r("div",_e,[t(m,{modelValue:l(u).title,"onUpdate:modelValue":e[1]||(e[1]=o=>l(u).title=o),placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6807\u9898",type:"textarea",autosize:{minRows:3,maxRows:3},maxlength:"64","show-word-limit":"",clearable:""},null,8,["modelValue"])])]),_:1}),t(s,{label:"\u6587\u7AE0\u7B80\u4ECB",prop:"desc"},{default:a(()=>[r("div",fe,[t(m,{modelValue:l(u).desc,"onUpdate:modelValue":e[2]||(e[2]=o=>l(u).desc=o),placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u7B80\u4ECB",type:"textarea",autosize:{minRows:3,maxRows:6},maxlength:200,"show-word-limit":"",clearable:""},null,8,["modelValue"])])]),_:1}),t(s,{label:"\u6587\u7AE0\u5C01\u9762",prop:"image"},{default:a(()=>[r("div",null,[r("div",null,[t(y,{modelValue:l(u).image,"onUpdate:modelValue":e[3]||(e[3]=o=>l(u).image=o),limit:1},null,8,["modelValue"])]),Ee])]),_:1}),t(s,{label:"\u6587\u7AE0\u5173\u952E\u8BCD",prop:"keyWords"},{default:a(()=>[t(x,{class:"flex-1",clearable:"",modelValue:l(u).keyWords,"onUpdate:modelValue":e[4]||(e[4]=o=>l(u).keyWords=o),placeholder:"\u8BF7\u9009\u62E9\u5173\u952E\u8BCD",multiple:""},{default:a(()=>[(E(!0),B(me,null,de(l(_),(o,I)=>(E(),ne(k,{key:I,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"\u4F5C\u8005",prop:"cid"},{default:a(()=>[r("div",Fe,[t(m,{modelValue:l(u).cid,"onUpdate:modelValue":e[5]||(e[5]=o=>l(u).cid=o),placeholder:"\u8BF7\u8F93\u5165\u4F5C\u8005\u540D\u79F0"},null,8,["modelValue"])])]),_:1}),t(s,{label:"\u6392\u5E8F",prop:"sort"},{default:a(()=>[r("div",null,[t(q,{modelValue:l(u).sort,"onUpdate:modelValue":e[6]||(e[6]=o=>l(u).sort=o),min:0,max:9999},null,8,["modelValue"]),ge])]),_:1}),t(s,{label:"\u53D1\u5E03\u65F6\u95F4",prop:"publishTime"},{default:a(()=>[r("div",be,[t(R,{modelValue:l(u).publishTime,"onUpdate:modelValue":e[7]||(e[7]=o=>l(u).publishTime=o),align:"right",type:"date",placeholder:"\u9009\u62E9\u65E5\u671F"},null,8,["modelValue"])])]),_:1}),t(s,{label:"\u6587\u7AE0\u72B6\u6001",required:"",prop:"status"},{default:a(()=>[t(b,{modelValue:l(u).status,"onUpdate:modelValue":e[8]||(e[8]=o=>l(u).status=o)},{default:a(()=>[t(c,{label:1},{default:a(()=>[d("\u663E\u793A")]),_:1}),t(c,{label:0},{default:a(()=>[d("\u9690\u85CF")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"\u6587\u7AE0\u63A8\u8350",required:"",prop:"recommended"},{default:a(()=>[t(b,{modelValue:l(u).recommended,"onUpdate:modelValue":e[9]||(e[9]=o=>l(u).recommended=o)},{default:a(()=>[t(c,{label:1},{default:a(()=>[d("\u662F")]),_:1}),t(c,{label:0},{default:a(()=>[d("\u5426")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),r("div",Be,[t(s,{label:"\u6587\u7AE0\u5185\u5BB9",required:"",prop:"content"},{default:a(()=>[t(U,{modelValue:l(u).content,"onUpdate:modelValue":e[10]||(e[10]=o=>l(u).content=o),height:667,width:375},null,8,["modelValue"])]),_:1})])])]),_:1},8,["model","rules"])]),_:1}),t(N,null,{default:a(()=>[t(W,{type:"primary",onClick:D},{default:a(()=>[d("\u4FDD\u5B58")]),_:1})]),_:1})])}}});export{fu as default};
